(function(t){function e(e){for(var n,i,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},4519:function(t,e,a){"use strict";var n=a("6b7c"),o=a.n(n);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i={name:"app"},s=i,l=(a("4519"),a("2877")),c=Object(l["a"])(s,o,r,!1,null,"73de18cd",null),u=c.exports,d=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("header",[a("b-img",{attrs:{src:this.configVal.PicUrl}}),a("b-link",{attrs:{href:"/"}},[a("h1",{staticStyle:{color:"black","margin-top":"1vh"}},[t._v(t._s(this.configVal.Title))])]),a("h3",{attrs:{align:"right"}},[t._v(t._s(this.configVal.Description))]),a("b-navbar",{attrs:{type:"light",variant:"light"}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{exact:"","exact-active-class":"active",href:"/"}},[t._v("主页")])],1)],1)],1),a("router-view"),a("footer",[a("div",{staticStyle:{"text-align":"center"}},[a("hr"),a("p",[t._v("2021 - 由 "),a("a",{attrs:{href:"https://gitee.com/vanisignal/NatsunaBlog/"}},[t._v("NatsunaBlog")]),t._v(" 驱动")])])])],1)},h=[],m={name:"index",data:function(){return{}}},f=m,v=Object(l["a"])(f,p,h,!1,null,"68f7657c",null),g=v.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("b-row",{attrs:{cols:"12"}},t._l(t.posts,(function(e){return a("blog-post",t._b({key:e.id},"blog-post",e,!1))})),1)],1),a("b-pagination-nav",{attrs:{"link-gen":t.linkGen,"number-of-pages":t.pages,align:"center",pills:"",size:"ml","use-router":""}})],1)},_=[],y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{cols:"12"}},[a("b-card",{attrs:{title:t.title}},[a("b-card-text",[t._v(" "+t._s(t.time)+" ")]),a("b-button",{attrs:{variant:"light",to:"post/"+t.id}},[t._v("点击阅读")])],1)],1)},$=[],k={name:"blog-post",props:["title","time","id"]},w=k,P=Object(l["a"])(w,y,$,!1,null,"33942524",null),x=P.exports,U=a("bc3a"),O=a.n(U),j={name:"index-posts",components:{"blog-post":x},data:function(){return{posts:[],pages:1}},methods:{linkGen:function(t){return 1===t?"?":"?page=".concat(t)},curPage:function(){var t=this.$route.query.page;return t||1}},created:function(){var t=this;document.title=this.configVal.Title,O()({method:"get",url:this.configVal.GetPageNumUrl}).then((function(e){t.pages=0!=e.data.pages?e.data.pages:1})),O()({method:"get",url:this.configVal.GetPostsUrl,params:{page:this.curPage()}}).then((function(e){t.posts=e.data.posts}))},watch:{$route:function(){this.$router.go(0)}}},C=j,V=Object(l["a"])(C,b,_,!1,null,"0a93bbbe",null),G=V.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("header",{staticClass:"header"},[a("br"),a("h1",[t._v(t._s(t.post.title))]),a("h6",[t._v("由 "+t._s(t.post.author)+" 于 "+t._s(t.post.time)+" 所写，被访问 "+t._s(t.post.visit_times)+" 次")]),a("hr")]),a("mavon-editor",{attrs:{value:t.post.content,subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,ishljs:!0,boxShadow:!1}})],1)},E=[],D=a("b2d8"),A=a.n(D),N={name:"onepost",components:{"mavon-editor":A.a.mavonEditor},data:function(){return{post:{title:"",time:"",content:"",visit_times:"",author:""}}},created:function(){var t=this;O()({method:"get",url:this.configVal.GetOnePostUrl,params:{id:this.$route.params.id,visitOnly:!0}}).then((function(e){console.log(e.data),""==e.data&&t.$router.push("/page-not-found"),t.post=e.data}))},watch:{$route:function(){this.$router.go(0)}}},T=N,B=(a("7ff4"),Object(l["a"])(T,S,E,!1,null,"72bfdb21",null)),M=B.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{align:"center"}},[a("b-navbar",{attrs:{type:"dark",variant:"info"}},[a("b-navbar-brand",{attrs:{href:"/#/admin"}},[t._v("AvaBlog控制台")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item",{attrs:{href:"/#/admin/manage"}},[t._v("管理")]),a("b-nav-item",{attrs:{href:"/#/admin/modify/-1"}},[t._v("新建")]),a("b-nav-item",{attrs:{href:"/#/"}},[t._v("返回首页")])],1)],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{attrs:{size:"sm",disabled:""}},[t._v(t._s(t.user))]),a("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm"},on:{click:t.buttonAct}},[t._v(t._s(t.buttonWord))])],1)],1),"/admin"==t.$router.currentRoute.path?a("b-nav-text",[t._v(" 欢迎来到AvaBlog控制台！"),a("br"),t._v(" 请先点击右上角登录。"),a("br"),t._v(" 选择“管理“可编辑或删除您写过的文章。”新建“会创建新文章。"),a("br"),t._v(" 本博客程序使用了Vue、BootstrapVue、GoFrame、MavonEditor、axios等框架或组件，遵循MulanPSL 2.0协议发布。 ")]):t._e(),a("router-view")],1)},L=[];a("b0c0");function F(t){O()({method:"post",url:this.configVal.CheckUrl}).then((function(e){void 0!==t.user&&(t.user=e.data.user),t.isChecked=e.data.isChecked}))}function z(t){O()({method:"get",url:this.configVal.LogOutUrl}).then((function(e){t.$router.go(0)}))}function q(t){t.$router.push("/admin/check")}O.a.defaults.withCredentials=!0;var J,R,W,Y,Q={name:"admin",data:function(){return{user:"",isChecked:void 0}},methods:{buttonAct:function(){this.isChecked?z(this):q(this)}},created:function(){F(this)},computed:{buttonWord:function(){return this.isChecked?"退出":"登录"}},watch:{$route:function(t,e){"Check"==e.name&&this.$router.go(0)}}},H=Q,K=Object(l["a"])(H,I,L,!1,null,"a88db332",null),X=K.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isChecked?a("div",[a("div",{staticStyle:{"min-height":"80vh"}},[a("br"),a("b-form-input",{attrs:{placeholder:"标题"},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}}),a("br"),a("mavon-editor",{ref:"md",staticStyle:{"min-height":"60vh"},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}})],1),a("b-button",{staticStyle:{"align-self":"center"},attrs:{variant:"primary"},on:{click:t.summit}},[t._v("发布")])],1):a("div",[a("p",[t._v("请先登录")])])])},tt=[],et={name:"modify",data:function(){return{user:"Not Login",isChecked:void 0,post:{title:"",time:"",content:"",visit_times:"",author:""},formdata:void 0}},components:{"mavon-editor":A.a.mavonEditor},methods:{$imgAdd:function(t,e){var a=this;this.formdata=new FormData,this.formdata.append("image",e),O()({url:this.configVal.UploadImageUrl,method:"post",data:this.formdata,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var n=a.configVal.GetImageBaseUrl+"/"+e.data.name;a.$refs.md.$img2Url(t,n)}))},$imgDel:function(t){O()({method:"post",url:this.configVal.DeleteImageUrl,data:{url:t[0]}})},summit:function(){var t=this;O()({method:"post",url:this.configVal.UpdatePostUrl,data:{id:this.$route.params.id,title:this.post.title,content:this.post.content}}).then((function(e){t.$router.push("/post/"+e.data.id)}))}},created:function(){var t=this;F(this),-1!=this.$route.params.id&&O()({method:"get",url:this.configVal.GetOnePostUrl,params:{id:this.$route.params.id,visitOnly:!1}}).then((function(e){""==e.data&&t.$router.push("/page-not-found"),t.post=e.data}))},watch:{$route:function(){this.$router.go(0)}}},at=et,nt=Object(l["a"])(at,Z,tt,!1,null,"64643a47",null),ot=nt.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isChecked?a("div",[a("br"),a("h3",[t._v("所有文章")]),a("br"),a("div",{staticStyle:{"min-height":"75vh"}},[a("b-row",{attrs:{cols:"12"}},t._l(t.posts,(function(e){return a("blog-manage",t._b({key:e.id},"blog-manage",e,!1))})),1)],1),a("b-pagination-nav",{attrs:{"link-gen":t.linkGen,"number-of-pages":t.pages,align:"center","use-router":""}})],1):a("div",[a("p",[t._v("请先登录")])])])},it=[],st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{cols:"4"}},[a("b-card",{attrs:{title:t.title}},[a("b-card-text",[t._v(" "+t._s(t.time)+" ")]),a("b-button",{attrs:{variant:"light",href:t.editUrl}},[t._v("编辑")]),a("b-button",{attrs:{variant:"light"},on:{click:t.deletePost}},[t._v("删除")])],1)],1)},lt=[],ct={name:"blog-manage",props:["title","time","id"],methods:{deletePost:function(){var t=this;O()({method:"post",url:this.configVal.DeletePostUrl,data:{id:this.id}}).then((function(e){t.$router.go(0)}))}},computed:{editUrl:function(){return"/admin/modify/"+this.id}}},ut=ct,dt=Object(l["a"])(ut,st,lt,!1,null,"c0ee4826",null),pt=dt.exports,ht={name:"manage",components:{"blog-manage":pt},data:function(){return{isChecked:void 0,pages:1,posts:[]}},created:function(){var t=this;F(this),O()({method:"get",url:this.configVal.GetPageNumUrl}).then((function(e){t.pages=0!=e.data.pages?e.data.pages:1})),O()({method:"get",url:this.configVal.GetPostsUrl,params:{page:this.curPage()}}).then((function(e){t.posts=e.data.posts}))},methods:{linkGen:function(t){return 1===t?"?":"?page=".concat(t)},curPage:function(){var t=this.$route.query.page;return t||1}},watch:{$route:function(){this.$router.go(0)}}},mt=ht,ft=Object(l["a"])(mt,rt,it,!1,null,"4ed19492",null),vt=ft.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",{on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[a("b-col",{attrs:{cols:"3",offset:"4"}},[a("br"),a("h3",{staticStyle:{"text-align":"center"}},[t._v("登录")]),a("br"),a("b-input",{attrs:{placeholder:"用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("b-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("br"),a("b-button",{staticStyle:{"align-self":"center"},attrs:{variant:"primary"},on:{click:t.PostPassword}},[t._v("登录")]),a("br"),a("b-nav-text",[t._v(t._s(t.alert))])],1)],1)},bt=[],_t={name:"check",data:function(){return{username:"",password:"",alert:""}},methods:{PostPassword:function(){var t=this;console.log("username: "+this.username),console.log("password(after encryption): "+this.$md5(this.password)),console.log("You can add it to SQL to login."),O()({method:"post",url:this.configVal.CheckUrl,data:{username:this.username,password:this.$md5(this.password)}}).then((function(e){1==e.data.isChecked?t.$router.go(-1):t.alert="用户名或密码错误"}))}}},yt=_t,$t=Object(l["a"])(yt,gt,bt,!1,null,"7e9a9f6e",null),kt=$t.exports,wt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Pt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("br"),a("p",{attrs:{align:"center"}},[t._v("你查询的页面未找到！")])])}],xt={name:"page-not-found"},Ut=xt,Ot=Object(l["a"])(Ut,wt,Pt,!1,null,"2a858e80",null),jt=Ot.exports,Ct={},Vt=Object(l["a"])(Ct,J,R,!1,null,null,null),Gt=(Vt.exports,{}),St=Object(l["a"])(Gt,W,Y,!1,null,null,null);St.exports;n["default"].use(d["a"]);var Et=new d["a"]({mode:"history",routes:[{path:"/",component:g,children:[{path:"post/:id",name:"Post",component:M},{path:"",name:"Posts",component:G},{path:"page-not-found",name:"PageNotFound",component:jt}]},{path:"/admin",name:"Admin",component:X,children:[{path:"manage",name:"Manage",component:vt},{path:"modify/:id",name:"New",component:ot},{path:"check",name:"Check",component:kt}]},{path:"*",redirect:"/page-not-found"}]}),Dt=a("5f5b"),At=a("a7fe"),Nt=a.n(At),Tt=a("8237"),Bt=a.n(Tt),Mt="http://127.0.0.1:8080",It="Yuno",Lt="再年轻一次吧",Ft="博客,龙芯,C++,Go,Rust",zt="../../assets/images/background.webp",qt={Title:It,Description:Lt,Tag:Ft,PicUrl:zt,GetPageNumUrl:Mt+"/ava-api/get-page-num",GetPostsUrl:Mt+"/ava-api/get-posts",GetOnePostUrl:Mt+"/ava-api/post/get-one",CheckUrl:Mt+"/ava-api/check",LogOutUrl:Mt+"/ava-api/logout",UploadImageUrl:Mt+"/ava-api/image/upload",DeleteImageUrl:Mt+"/ava-api/image/delete",UpdatePostUrl:Mt+"/ava-api/post/update",DeletePostUrl:Mt+"/ava-api/post/delete",GetImageBaseUrl:Mt+"/static/images"};a("f9e3"),a("2dd8"),a("64e1");n["default"].use(Dt["a"]),n["default"].use(Nt.a,O.a),n["default"].use(A.a),n["default"].config.productionTip=!1,n["default"].prototype.$md5=Bt.a,n["default"].prototype.configVal=qt,new n["default"]({router:Et,render:function(t){return t(u)}}).$mount("#app")},"6b7c":function(t,e,a){},"7ff4":function(t,e,a){"use strict";var n=a("c155"),o=a.n(n);o.a},c155:function(t,e,a){}});
//# sourceMappingURL=app.ec724e08.js.map